jQuery(document).ready(function(b){function k(a){return 0===a%4&&0!==a%100||0===a%400&&0===a%100?!0:!1}function m(a,c,d){var e=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];c=[0,0,31,62,93,124,155,186,216,246,276,306,336,365][parseInt(c)]+parseInt(d);d=parseInt(a)+621;286<c&&d++;k(d-1)&&286<c&&c--;c=286<c?c-286:c+79;if(k(d))for(a=0;c>f[a];a++)c-=f[a];else for(a=0;c>e[a];a++)c-=e[a];a++;10>a&&(a="0"+a);return[d,a,c]}function n(a,c,d){var e=[31,31,31,31,31,31,30,30,30, 30,30,29],f=[0,0,31,59,90,120,151,181,212,243,273,304,334,365][parseInt(c)]+parseInt(d),g=k(a);d=k(a-1);if(79<f)c=g?f-78:f-79,a-=621;else if(c=d||g&&2<c?287+f:286+f,a-=622,!1===d&&366===c)return[a,12,30];for(d=0;c>e[d];d++)c-=e[d];e=++d;e=10>e?e="0"+e:e;return[a,e,c]}function p(a,c,d,e,f){for(var g='<div class="timestamp-wrap persian"><select id="mma" name="mma">',h=1;13>h;h++)g=h===parseInt(c)?g+('<option value="'+h+'" selected="selected">'+q[h]+"</option>"):g+('<option value="'+h+'">'+q[h]+"</option>");return g+('</select><input type="text" id="jja" name="jja" value="'+d+'" size="2" maxlength="2" autocomplete="off" />,<input type="text" id="aaa" name="aaa" value="'+a+'" size="4" maxlength="4" autocomplete="off" /> \u062f\u0631 <input type="text" id="hha" name="hha" value="'+e+'" size="2" maxlength="2" autocomplete="off" /> : <input type="text" id="mna" name="mna" value="'+f+'" size="2" maxlength="2" autocomplete="off" /></div>')}function r(){var a=b("#timestamp b").text(),c=b("#mma option:selected").text()+ " "+b("#jja").val()+", "+b("#aaa").val()+" \u062f\u0631 "+b("#hha").val()+":"+b("#mna").val();c=c.replace(/\d+/g,function(d){for(var e="",f=0,g=d.length;f<g;f++)e+=String.fromCharCode(d.charCodeAt(f)+1728);return e});a!=c&&(b("#timestamp b").html(c),clearInterval(l))}var q=WPP_MONTHS_NAME.months;b(".wp-editor-wrap.html-active #content").css("direction","ltr");b("a.edit-timestamp").on("click",function(){b(".persian").remove();var a=n(b("#aa").val(),b("#mm").val(),b("#jj").val());a=p(a[0],a[1],a[2], b("#hh").val(),b("#mn").val());b("#timestampdiv").prepend(a);b("#timestampdiv .timestamp-wrap:eq(1)").hide()});b("#the-list").on("click",".editinline",function(){var a=b(this).closest("td"),c=a.find(".aa").html();if(1400<c){var d=a.find(".mm").html(),e=a.find(".jj").html(),f=a.find(".hh").html();a=a.find(".mn").html();c=n(c,d,e);b(".persian").remove();b(".inline-edit-date").prepend(p(c[0],c[1],c[2],f,a));b(".inline-edit-date div:eq(1)").hide()}});b("#timestampdiv,.inline-edit-date").on("keyup","#hha",function(){b("input[name=hh]").val(b(this).val())}).on("keyup","#mna",function(){b("input[name=mn]").val(b(this).val())}).on("keyup","#aaa , #jja",function(){var a=b("#aaa").val(),c=b("#mma").val(),d=b("#jja").val();date=m(a,c,d);b("input[name=aa]").val(date[0]);b("select[name=mm]").val(date[1]);b("input[name=jj]").val(date[2])}).on("change","#mma",function(){var a=b("#aaa").val(),c=b("#mma").val(),d=b("#jja").val();date=m(a,c,d);b("input[name=aa]").val(date[0]);b("select[name=mm]").val(date[1]);b("input[name=jj]").val(date[2])});b("select[name=m]").hide();var l;b("#timestampdiv").on("keypress",function(a){13==a.which&&(l=setInterval(function(){r()},50))});b(".save-timestamp , .cancel-timestamp , #publish").on("click",function(){b("#aaa").length&&(l=setInterval(function(){r()},50))})});